<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>导航</title>
    <link rel="stylesheet" href="../css/menu.css">
</head>

<body>
    <div class="nav">
        <ul>
            <li class="active">
                <a href="javascript:void(0);" target="view_frame" title="首页">
                    <i class="menu-icon icon1"></i>
                    <span>首页</span>
                </a>
            </li>
            <li>
                <a href="javascript:void(0);" title="实时数据">
                    <i class="menu-icon icon2"></i>
                    <span>实时数据</span>
                </a>
            </li>
            <li>
                <a href="../html/stationInfo.html" target="view_frame" title="厂站管理">
                    <i class="menu-icon icon3"></i>
                    <span>厂站管理</span>
                </a>
                <ul class="sec-menu">
                    <li>
                        <a href="../html/stationInfo.html" target="view_frame" title="厂站信息">厂站信息</a>
                    </li>
                    <li>
                        <a href="javascript:void(0);" title="设备信息">设备信息</a>
                    </li>
                    <li>
                        <a href="javascript:void(0);" title="部件信息">部件信息</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="javascript:void(0);" title="仓库管理">
                    <i class="menu-icon icon4"></i>
                    <span>仓库管理</span>
                </a>
                <ul class="sec-menu">
                    <li>
                        <a href="javascript:void(0);" title="出入库">出入库</a>
                    </li>
                    <li>
                        <a href="javascript:void(0);" target="view_frame" title="故障维修">故障维修</a>
                    </li>
                    <li>
                        <a href="javascript:void(0);" title="盘点">盘点</a>
                    </li>
                    <li>
                        <a href="javascript:void(0);" target="view_frame" title="仓库信息">仓库信息</a>
                    </li>
                    <li>
                        <a href="javascript:void(0);" title="历史记录">历史记录</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="javascript:void(0);" title="车辆管理">
                    <i class="menu-icon icon5"></i>
                    <span>车辆管理</span>
                </a>
                <ul class="sec-menu">
                    <li>
                        <a href="javascript:void(0);" target="view_frame" title="出还车">出还车</a>
                    </li>
                    <li>
                        <a href="javascript:void(0);" target="view_frame" title="车辆维修">车辆维修</a>
                    </li>
                    <li>
                        <a href="javascript:void(0);" target="view_frame" title="车辆信息">车辆信息</a>
                    </li>
                    <li>
                        <a href="javascript:void(0);" target="view_frame" title="历史记录">历史记录</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="javascript:void(0);" target="view_frame" title="人员管理">
                    <i class="menu-icon icon6"></i>
                    <span>人员管理</span>
                </a>
                <ul class="sec-menu">
                    <li>
                        <a href="./typePerson.html" target="view_frame" title="人员配置">人员配置</a>
                    </li>
                    <li>
                        <a href="./shift.html" target="view_frame" title="排版规则配置">排版规则配置</a>
                    </li>
                    <li>
                        <a href="javascript:void(0);" target="view_frame" title="班次信息">班次信息</a>
                    </li>
                    <li>
                        <a href="javascript:void(0);" target="view_frame" title="资质管理">资质管理</a>
                    </li>
                    <li>
                        <a href="./wageConfig.html" target="view_frame" title="工资配置">工资配置</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="javascript:void(0);" title="工单管理">
                    <i class="menu-icon icon7"></i>
                    <span>工单管理</span>
                </a>
            </li>
            <li>
                <a href="javascript:void(0);" target="view_frame" title="财务分析">
                    <i class="menu-icon icon8"></i>
                    <span>财务分析</span>
                </a>
            </li>
            <li>
                <a href="javascript:void(0);" target="view_frame" title="统计报表">
                    <i class="menu-icon icon9"></i>
                    <span>统计报表</span>
                </a>
            </li>
            <li>
                <a href="javascript:void(0);" target="view_frame" title="知识库">
                    <i class="menu-icon icon10"></i>
                    <span>知识库</span>
                </a>
            </li>
            <li>
                <a href="../html/organConfig.html" target="view_frame" title="初始化配置">
                    <i class="menu-icon icon11"></i>
                    <span>初始化配置</span>
                </a>
                <ul class="sec-menu">
                    <li>
                        <a href="javascript:void(0);" target="view_frame" title="基础信息初始化">
                            基础信息初始化
                            <img src="../images/up.png" alt="" class="rotate">
                        </a>
                        <ul class="third-menu">
                            <li>
                                <a href="../html/organConfig.html" target="view_frame" title="组织机构配置">组织机构配置</a>
                            </li>
                            <li>
                                <a href="../html/roleConfig.html" target="view_frame" title="角色配置">角色配置</a>
                            </li>
                            <li>
                                <a href="../html/personConfig.html" target="view_frame" title="角色配置">人员配置</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="../html/supplierConfig.html" target="view_frame" title="供应商初始化">供应商初始化</a>
                    </li>
                    <li>
                        <a href="../html/levelConfig.html" target="view_frame" title="级别初始化">级别初始化</a>
                    </li>
                    <li>
                        <a href="../html/equipmentTemplateConfig.html" target="view_frame" title="设备模板初始化">设备模板初始化</a>
                    </li>
                    <li>
                        <a href="javascript:void(0);" target="view_frame" title="部件模板初始化">部件模板初始化</a>
                    </li>
                    <li>
                        <a href="../html/drugConfig.html" target="view_frame" title="药剂模板初始化">药剂模板初始化</a>
                    </li>
                    <li>
                        <a href="javascript:void(0);" target="view_frame" title="工艺初始化">
                            工艺初始化
                            <img src="../images/up.png" alt="" class="rotate">
                        </a>
                        <ul class="third-menu">
                            <li>
                                <a href="../html/placeConfig.html" target="view_frame" title="位置初始化">位置初始化</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="../html/taskConfig.html" target="view_frame" title="任务类型初始化">任务类型初始化</a>
                    </li>
                    <li>
                        <a href="../html/costConfig.html" target="view_frame" title="费用类型初始化">费用类型初始化</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="../html/stationConfigure.html" target="view_frame" title="系统配置">
                    <i class="menu-icon icon12"></i>
                    <span>系统配置</span>
                </a>
                <ul class="sec-menu">
                    <li>
                        <a href="../html/stationConfigure.html" target="view_frame" title="厂站配置">厂站配置</a>
                    </li>
                    <li>
                        <a href="../html/equipmentConfigure.html" target="view_frame" title="设备配置">设备配置</a>
                    </li>
                    <li>
                        <a href="../html/depotConfigure.html" target="view_frame" title="仓库配置">仓库配置</a>
                    </li>
                    <li>
                        <a href="../html/carConfigure.html" target="view_frame" title="车辆配置">车辆配置</a>
                    </li>
                    <li>
                        <a href="javascript:void(0);" target="view_frame" title="任务配置">任务配置</a>
                    </li>
                    <li>
                        <a href="../html/approvalConfigure.html" target="view_frame" title="审批流程配置">审批流程配置</a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
    <div class="switch-menu">
        <div class="line"></div>
        <div class="line"></div>
        <div class="line"></div>
    </div>
    <script src="../js/jquery-3.2.1.min.js"></script>
    <script>
        var frameset = parent.document.getElementById("main");
        $(function () {
            // 一级菜单点击事件
            $('.nav>ul>li>a').on('click', function () {
                console.log(1)
                var $this = $(this);
                var $sec = $this.next('.sec-menu');
                var $third = $sec.find('li:eq(0) .third-menu');

                $this.parent('li').addClass('active');
                $this.parent('li').siblings('li').removeClass('active')
                    .find('.sec-menu').hide()
                    .find('.active').removeClass('active')
                    .parents('.third-menu').css('display', 'none')
                    .prev('a').find('img').addClass('rotate');
                if ($this.next('.sec-menu').length == 0) {
                    if ($('.switch-menu').hasClass('small')) {
                        frameset.cols = "62,*";
                    } else {
                        frameset.cols = "130,*";
                    }
                } else {
                    $sec.show();
                    if ($('.switch-menu').hasClass('small')) {
                        frameset.cols = "202,*";
                        $sec.css({
                            left: 62 + 'px'
                        })
                    } else {
                        frameset.cols = "270,*";
                        $sec.css({
                            left: 130 + 'px'
                        })
                    }
                    if ($third.length == 0) {
                        $sec.find('li:eq(0)').addClass('active')
                            .siblings().removeClass('active')
                            .find('active').removeClass('active');
                    } else {
                        $sec.find('li').removeClass('active')
                        $third.show().find('li:eq(0)').addClass('active')
                        $third.prev('a').find('img').removeClass('rotate');
                    }
                }
            })
            // 二级菜单点击事件
            $('.sec-menu>li').on('click', function (event) {
                event.stopPropagation();
                var time = new Date().getMilliseconds();
                var $this = $(this);
                
                if ($this.find('.third-menu').length == 0) {
                    
                    $this.addClass('active').siblings('li').removeClass('active');
                    $this.parent().find('.third-menu').hide()
                        .prev('a').find('img').addClass('rotate');
                    $this.parent().find('.third-menu').find('li.active').removeClass('active')
                } else {
                    if ($this.find('img').hasClass('rotate')) {
                        $this.find('img').removeClass('rotate');
                        
                        $('.third-menu').not($this.find('.third-menu')).hide()
                            .prev().find('img').addClass('rotate');
                            
                        $this.find('.third-menu').show();
                        
                    } else {
                        $this.find('img').addClass('rotate');
                        $this.find('.third-menu').hide();
                    }
                }
            })

            // 三级菜单点击事件
            $('.third-menu>li').on('click', function (event) {
                console.log(3)
                
                event.stopPropagation();
                var $this = $(this);
                $('.sec-menu .active').removeClass('active');
                $this.addClass('active')
            })
        })

        // 监听f5局部刷新内容frame
        document.onkeydown = function (e) {
            e = window.event || e;
            var keycode = e.keyCode || e.which;
            if (keycode == 116) {
                if (window.event) {// ie 
                    e.preventDefault();
                    window.parent.frames["view_frame"].location.reload();
                } else {// firefox  
                    e.preventDefault();
                    window.parent.frames["view_frame"].location.reload();
                }
            }
        };

        var switchMenu = document.getElementsByClassName('switch-menu')[0];
        switchMenu.addEventListener('click', function () {
            var $this = $(this);
            var $left = $('.nav, .nav>ul');
            var $sec = $('.sec-menu');
            var $span = $('.nav>ul>li>a>span');
            var $line = $('.line');
            if ($this.hasClass('small')) {
                $this.removeClass('small');
                if ($('li.active').first().find('.sec-menu').length == 0) {
                    frameset.cols = "130,*";
                } else {
                    frameset.cols = "270,*";
                }
                $left.css({
                    width: 130 + 'px'
                });
                $sec.css({
                    left: 130 + 'px'
                });
                $span.show();
                $line.eq(2).css({
                    width: 16 + 'px',
                    marginLeft: 55 + 'px'
                })
            } else {
                $this.addClass('small');
                if ($('li.active').first().find('.sec-menu').length == 0) {
                    frameset.cols = "63,*";
                } else {
                    frameset.cols = "202,*";
                }
                $left.css({
                    width: 62 + 'px'
                });
                $sec.css({
                    left: 62 + 'px'
                });
                $span.hide();
                $line.eq(2).css({
                    width: 20 + 'px',
                    marginLeft: 'auto'
                })
            }
        })
    </script>
</body>

</html>